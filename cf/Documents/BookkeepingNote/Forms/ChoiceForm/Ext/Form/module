////////////////////////////////////////////////////////////////////////////////
// COMMON PROCEDURES AND FUNCTION

Procedure OnOpen()
	
	Dialogs.AddFormMainActionsBookkeepingButton(ThisForm);
	
EndProcedure

Procedure SetFilterByCustomer(Customer, DeliveryPoint, SalesInvoice) Export
	
	If Not Customer.IsEmpty() Then
		Filter.Customer.Set(Customer);
	EndIf;
	
	If Not DeliveryPoint.IsEmpty() Then
		Filter.DeliveryPoint.Set(DeliveryPoint);
	EndIf;
	
	If Not Controls.DocumentList.CurrentRow = Undefined Then
		Controls.DocumentList.CurrentRow = SalesInvoice;
	EndIf;
	
EndProcedure

Procedure SetFilter(Document, FilterStructure,OmitEmptyValues = False) Export
	
	For Each KeyAndValue In FilterStructure Do
		If OmitEmptyValues AND ValueIsNotFilled(KeyAndValue.Value) Then
			Continue;
		EndIf;	
		Filter[KeyAndValue.Key].Set(KeyAndValue.Value);
	EndDo;	
	
	If Document <> Undefined Then
		Controls.DocumentList.CurrentRow = Document;
	EndIf;
	
EndProcedure

Procedure FormActionsNestedStructure(Button)
	If Controls.DocumentList.CurrentData <> Undefined Then
		Dialogs.ShowSlaveDocuments(Controls.DocumentList.CurrentData.Ref);
	EndIf;	
EndProcedure

Procedure FormActionsShowRegisterRecords(Button)
	If Controls.DocumentList.CurrentData <> Undefined Then
		Dialogs.ShowRegistersRecords(ThisForm,Controls.DocumentList.CurrentData.Ref);
	EndIf;
EndProcedure

Procedure FormActionsShowRegisterRecordsBookkeeping(Button)
	If Controls.DocumentList.CurrentData <> Undefined Then
		Dialogs.ShowDocumentsRecordsBookkeeping(Controls.DocumentList.CurrentData.Ref);
	EndIf;
EndProcedure

Procedure FormActionsShowBookkeepingOperation(Button)
	If Controls.DocumentList.CurrentData <> Undefined Then
		Dialogs.ShowBookkeepingOperation(Controls.DocumentList.CurrentData.Ref);
	EndIf;
EndProcedure
