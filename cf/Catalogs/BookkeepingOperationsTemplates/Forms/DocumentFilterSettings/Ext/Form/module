
Procedure OnOpen()
	
	ChangeFilterOnDocumentChange(FilterAsXML);
	
EndProcedure

Procedure FormMainActionsSaveFilterSettings(Button)
	
	FilterAsXML = Common.SerializeObject(DataCompositionSettingsComposer.Settings.Filter);
	Close(True);
	
EndProcedure

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Function ChangeFilterOnDocumentChange(FilterAsXML = "")
	
	DataCompositionSettingsComposer = ApplyDocumentBaseTableChange("",Enums.BookkeepingOperationTemplateTableKind.DocumentRecords);
	
	If NOT IsBlankString(FilterAsXML) Then
		
		TemplateReports.CopyItems(DataCompositionSettingsComposer.Settings.Filter,Common.GetObjectFromXML(FilterAsXML,Type("DataCompositionFilter")),True,True);
		
	EndIf;	
	
EndFunction	

